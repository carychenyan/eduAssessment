function AjaxForJson(requestUrl,requestData,SuccessCallback,errorCallback,successPar){jQuery.ajax({type:"POST",url:requestUrl,data:requestData,contentType:"application/x-www-form-urlencoded",dataType:"text",success:function(data){var obj=null;try{obj=eval("("+data+")")}catch(ex){obj=data}null!=obj&&(0==obj.status?window.location.href=commonParams.dodoDevAccountPath+"/login/login":"login"==obj.type?loginDialog():(obj.score&&scoreDialog({scoreNum:obj.score,scoreDescribe:obj.honor_title}),SuccessCallback(obj,successPar)),$("img").error(function(){$(this).attr("src",commonParams.dodoStaticPath+"/shequPage/common/image/noFindPic.gif"),$(this).width()>160&&$(this).css("width","160px")}))},error:function(a){},complete:function(a,b){a=null}})}function loadjscssfile(a,b){if("js"==b){var c=document.createElement("script");c.setAttribute("type","text/javascript"),c.setAttribute("src",a);var d=a.split("/");c.setAttribute("id",d[d.length-1])}else if("css"==b){var c=document.createElement("link");c.setAttribute("rel","stylesheet"),c.setAttribute("type","text/css"),c.setAttribute("href",a)}"undefined"!=typeof c&&document.getElementsByTagName("head")[0].appendChild(c)}function getEvent(){if(document.all)return window.event;for(func=getEvent.caller;null!=func;){var a=func.arguments[0];if(a&&(a.constructor==Event||a.constructor==MouseEvent||"object"==typeof a&&a.preventDefault&&a.stopPropagation))return a;func=func.caller}return null}function UnixToDate(a,b,c){"number"==typeof c&&(a=parseInt(a)+60*parseInt(c)*60);var d=new Date(1e3*a),e="";return e+=d.getUTCFullYear()+"-",e+=btok((d.getUTCMonth()+1).toString(),2,"0")+"-",e+=btok(d.getUTCDate().toString(),2,"0"),b===!0&&(e+=" "+btok(parseInt(d.getUTCHours()+8).toString(),2,"0")+":",e+=btok(d.getUTCMinutes().toString(),2,"0")),e}function btok(a,b,c){for(var d="",e=1;e<=b-a.length;e++)d+=c;return a=d+a}function jsDateDiff(a,b){var c,d,e,f,g=parseInt((new Date).getTime()/1e3);if(a.toString().indexOf("-")>-1&&(a=new Date(a=a.replace(/-/g,"/")),a=parseInt(a/1e3)),f=g-a,e=parseInt(f/86400),d=parseInt(f/3600),c=parseInt(f/60),e>0&&10>e)return e+"天前";if(0>=e&&d>0)return d+"小时前";if(0>=d&&c>0)return c+"分钟前";if(0>=c)return"1分钟前";var h=new Date(1e3*a);return b?h.getMonth()+1+"-"+h.getDate():h.getFullYear()+"-"+(h.getMonth()+1)+"-"+h.getDate()}function pageMethod(){var a=this;a.resetTotal(),a.reloadpageAjax(a.currentPageNum,!1),a.page(),ready2go.call(a,!1)}function callbackPageMethod(){var a=this;a.resetTotal(),a.reloadpageAjax(a.currentPageNum,!0),a.page(),ready2go.call(a,!0)}function ready2go(a){var b=this;$("#"+b.page_obj_id+" a").die().live("click",function(){b.target_p=parseInt($(this).attr("p")),gotopage.call(b,b.target_p,a)})}function gotopage(a,b){this.cpage=a,this.page(),this.reloadpageAjax(a,b)}function jsPage(a,b,c,d,e,f,g,h){this.page_obj_id=b,this.page_obj=$("#"+b),this.results=parseInt(a),this.totalpage,this.pagesize=parseInt(c),this.cpage=g,this.count,this.target_p,this.curcount,this.outstr="",this.goNext=5,this.requestUrl=d,this.requestData=e,this.responseEvent=f,this.successPar=h?h:null,this.currentPageNum,g?(this.currentPageNum=g,this.cpage=parseInt(g)):(this.currentPageNum=1,this.cpage=1)}function btnLoading(a){this.main=a,this.btnHTML=a.outerHTML}function contentLoading(a){a.html('<div name="contentLoadingDiv" style="margin-top:20px;margin-bottom:20px;text-align: center;"><img style="margin: 0 10px;" src="'+commonParams.dodoStaticPath+'/yanxiuPage/img/loading_2.gif" alt=""></div>')}function contentAppendLoading(a){a.append('<div name="contentLoadingDiv" style="margin-top:20px;margin-bottom:20px;text-align: center;"><img style="margin: 0 10px;" src="'+commonParams.dodoStaticPath+'/yanxiuPage/img/loading_2.gif" alt=""></div>')}function removeContentLoading(a){a.find("div[name='contentLoadingDiv']").remove()}function characterTransform(a){return a=a.replace(/\%/g,"%25"),a=a.replace(/\+/g,"%2B"),a=a.replace(/\&/g,"%26")}function ToHtmlString(a){return toTXT(a)}function toTXT(a){if(a){var b=/\<|\>|\"|\'|\&|　| /g;a=a.replace(b,function(a){switch(a){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;";case" ":return" &nbsp;";default:return a}})}return a}function toHTML(a){if(a){var b=/\&lt;|\&gt;|\&quot;|\&apos;|\&amp;|\&nbsp;| /g;a=a.replace(b,function(a){switch(a){case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'";case"&amp;":return"&";case"&nbsp;":return" ";default:return a}})}return a}function UnixToDate(a,b,c){"number"==typeof c&&(a=parseInt(a)+60*parseInt(c)*60);var d=new Date(1e3*a),e="";return e+=d.getUTCFullYear()+"-",e+=btok((d.getUTCMonth()+1).toString(),2,"0")+"-",e+=btok(d.getUTCDate().toString(),2,"0"),b===!0&&(e+=" "+btok(parseInt(d.getUTCHours()+8).toString(),2,"0")+":",e+=btok(d.getUTCMinutes().toString(),2,"0")),e}function btok(a,b,c){for(var d="",e=1;e<=b-a.length;e++)d+=c;return a=d+a}function formatSize(a){if(a){for(rank=0,rankchar="Bytes";a>1024;)a/=1024,rank++;return a=Math.round(100*a)/100,1==rank?rankchar="KB":2==rank?rankchar="MB":3==rank&&(rankchar="GB"),a+" "+rankchar}return""}var commonParams={dodoDevAccountPath:"http://dev-account.dodoedu.com",dodoYanxiuPath:window.location.protocol+"//"+window.location.host,dodoStaticPath:window.location.protocol+"//dev-images.dodoedu.com",dodoPhotoPath:"http://dev-images.dodoedu.com/image/"};jQuery.extend({ajaxJSONP:function(a,b,c,d,e){$.ajax({type:"get",async:!1,url:a,data:b,dataType:"jsonp",jsonp:"callback",success:function(a){0==a.status?window.location.href=commonParams.dodoDevAccountPath+"/login/login":c(a,e)},error:function(a){}})}});var scriptsArray=new Array;$.cachedScript=function(a,b){for(var c in scriptsArray)if(scriptsArray[c]==a)return{done:function(a){"function"==typeof a&&a()}};return b=$.extend(b||{},{dataType:"script",url:a,cache:!0}),scriptsArray.push(a),$.ajax(b)};var adValidate={checkUser:function(a){var b=/^(?!_)(?!.*?_$)/;return b.test(a)&&a.length>=4&&a.length<=20?!0:!1},checkMobile:function(a){var b=/^1\d{10}$/;return b.test(a)?!0:!1},checkPhone:function(a){var b=/^0\d{2,3}-?\d{7,8}$/;return b.test(a)?!0:!1},checkEmail:function(a){var b=/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/;return b.test(a)?!0:!1},checkNameCH:function(a){var b=/[^\u4E00-\u9FA5]/g;return b.test(a)?!0:!1},checkIdentifier:function(a){var b=/^\d{12}$/,c=/^\d{20}$/,d=/^\d{10}$/;return b.test(a)||c.test(a)||d.test(a)?!0:!1},checkIDcards:function(a){var b={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"},c=0;if(!/(^\d{15}$)|(^\d{17}([0-9]|X|x)$)/.test(a))return!1;if(a=a.replace(/x$/i,"a"),null==b[parseInt(a.substr(0,2))])return!1;sBirthday=a.substr(6,4)+"-"+Number(a.substr(10,2))+"-"+Number(a.substr(12,2));var d=new Date(sBirthday.replace(/-/g,"/"));if(sBirthday!=d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate())return!1;for(var e=17;e>=0;e--)c+=Math.pow(2,e)%11*parseInt(a.charAt(17-e),11);return c%11!=1?!1:!0}},appPic={initPicPlayer:function(a,b,c,d){function e(a){if(h=a,clearInterval(g),!$("#"+b).is(":animated")){$("#"+b).animate({left:-c*a},500,function(){g=setTimeout(function(){if(1!=i.length){var a=h+1;a>=i.length&&(a=0),e(a)}},5e3)}),f&&$(f).removeClass(d),f=i[parseInt(a)],i.removeClass(d);var j=i[h];$(j).addClass(d)}}var f,g,h,f,i=a;$("#"+b).css("width",c*i.length+"px"),$("#"+b).find("li").css("width",c+"px");for(var j=0;j<i.length;j++)!function(){var a=j;i[j].onclick=function(){return f!=this?(e(a),!1):void 0}}();return e(0),$(".m-switcher").bind({mouseover:function(){$(this).find("div.arrow").css("display","block")},mouseout:function(){$(this).find("div.arrow").css("display","none")}}),$("div.btn_left").unbind().bind("click",function(){return 0==h&&(h=i.length),e(h-1),!1}),$("div.btn_right").unbind().bind("click",function(){return h==i.length-1&&(h=-1),e(parseInt(h+1)),!1}),!1}};jsPage.prototype.reloadpage=function(a){this.li.hide();for(var b=this.pagesize*a-this.pagesize;b<this.pagesize*a;b++)this.li.eq(b).show()},jsPage.prototype.reloadpageAjax=function(a,b){if(b){var c=this.requestData?this.requestData:new Object;c.p=a,$.ajaxJSONP(this.requestUrl,c,this.responseEvent,null,this.successPar)}else{var c=this.requestData+"&p="+a;AjaxForJson(this.requestUrl,c,this.responseEvent,null,this.successPar)}},jsPage.prototype.resetTotal=function(){0==this.results?(this.totalpage=0,this.cpage=0):this.results<=this.pagesize?this.totalpage=1:1==parseInt(this.results/this.pagesize)?this.totalpage=2:parseInt(this.results/this.pagesize)>1&&this.results%this.pagesize==0?this.totalpage=this.results/this.pagesize:this.totalpage=parseInt(this.results/this.pagesize)+1},jsPage.prototype.page=function(){if(this.totalpage<=this.goNext)for(this.count=1;this.count<=this.totalpage;this.count++)this.count!=this.cpage?this.outstr=this.outstr+"<a href='javascript:void(0)' p='"+this.count+"' >"+this.count+"</a>":this.outstr=this.outstr+"<span class='current' >"+this.count+"</span>";if(this.totalpage>this.goNext)if(0==parseInt((this.cpage-1)/this.goNext)){for(this.count=1;this.count<=this.goNext;this.count++)this.count!=this.cpage?this.outstr=this.outstr+"<a href='javascript:void(0)' p='"+this.count+"' >"+this.count+"</a>":this.outstr=this.outstr+"<span class='current'>"+this.count+"</span>";this.outstr=this.outstr+"<a href='javascript:void(0)' p='"+this.count+"' >&raquo;</a>"}else if(parseInt((this.cpage-1)/this.goNext)==parseInt(this.totalpage/this.goNext))for(this.outstr=this.outstr+"<a href='javascript:void(0)' p='"+parseInt((this.cpage-1)/this.goNext)*this.goNext+"' >&laquo;</a>",this.count=parseInt(this.totalpage/this.goNext)*this.goNext+1;this.count<=this.totalpage;this.count++)this.count!=this.cpage?this.outstr=this.outstr+"<a href='javascript:void(0)' p='"+this.count+"' >"+this.count+"</a>":this.outstr=this.outstr+"<span class='current'>"+this.count+"</span>";else{var a;for(this.outstr=this.outstr+"<a href='javascript:void(0)' p='"+parseInt((this.cpage-1)/this.goNext)*this.goNext+"' >&laquo;</a>",this.count=parseInt((this.cpage-1)/this.goNext)*this.goNext+1;this.count<=parseInt((this.cpage-1)/this.goNext)*this.goNext+this.goNext;this.count++)this.count!=this.cpage?this.outstr=this.outstr+"<a href='javascript:void(0)' p='"+this.count+"' >"+this.count+"</a>":this.outstr=this.outstr+"<span class='current'>"+this.count+"</span>",a=this.count==this.totalpage?"":"<a href='javascript:void(0)' p='"+(this.count+1)+"' >&raquo;</a>";this.outstr=this.outstr+a}this.totalpage>1?(this.Prestr="<a href='javascript:void(0)' p='"+parseInt(this.cpage-1)+"'>上一页</a>",this.startstr="<a href='javascript:void(0)' p='1'>首页</a>",this.nextstr="<a href='javascript:void(0)' p='"+parseInt(this.cpage+1)+"'>下一页</a>",this.endstr="<a href='javascript:void(0)' p='"+this.totalpage+"'>尾页</a>",1!=this.cpage?this.cpage>=this.totalpage?document.getElementById(this.page_obj_id).innerHTML="<div>"+this.startstr+this.Prestr+this.outstr+"</div>":document.getElementById(this.page_obj_id).innerHTML="<div>"+this.startstr+this.Prestr+this.outstr+this.nextstr+this.endstr+"</div>":document.getElementById(this.page_obj_id).innerHTML="<div>"+this.outstr+this.nextstr+this.endstr+"</div>"):document.getElementById(this.page_obj_id).innerHTML="",this.outstr=""},btnLoading.prototype.toLoading=function(a){if($(this.main).replaceWith('<img id="btnLoading" class="loadingStyle"  src="'+commonParams.dodoStaticPath+'/yanxiuPage/img/loading.gif" alt="">'),a){$("body").eq(0).append('<div id="coverImg" style="position:absolute;background:#f6f6f6;border:2px solid #C1C1C1;z-index:100;"><img style="margin: 0 10px;" src="'+commonParams.dodoStaticPath+'/shequPage/common/image/loading_1.gif" alt=""></div><div id="divCover" class="pageBg"></div>'),$("#divCover").css("display","block");var b,c;b=0==document.documentElement.clientWidth?document.documentElement.offsetWidth:document.documentElement.clientWidth,c=0==document.documentElement.clientHeight?document.documentElement.offsetHeight:document.documentElement.clientHeight;var d=0,e=0;document.documentElement&&document.documentElement.scrollTop?(d=document.documentElement.scrollTop,e=document.documentElement.scrollLeft):document.body&&(d=document.body.scrollTop,e=document.body.scrollLeft);var f=(document.documentElement.clientHeight+document.documentElement.scrollHeight,document.documentElement.clientWidth+document.documentElement.scrollWidth,$("#coverImg")[0].clientHeight),g=$("#coverImg")[0].clientWidth;$("#divCover").css({width:document.documentElement.scrollWidth,height:document.documentElement.scrollHeight});var h=c/2-f/2+d>=0?c/2-f/2+d:0,i=b/2-g/2+e>=0?b/2-g/2+e:0;$("#coverImg").css({top:h,left:i})}},btnLoading.prototype.toBtn=function(a){$("img#btnLoading").replaceWith(this.btnHTML),a&&($("#coverImg").remove(),$("#divCover").remove())},jQuery.fn.extend({horizontalScroll:function(a,b,c){var d=this,e=$(d).find("[name='conDiv']"),f=$(d).find("[name='showDiv']"),g=$(d).find("[name='cellDiv']"),h=$(d).find("a[name='toNextA']"),i=$(d).find("a[name='toPreA']"),j=c?c:0,k=a*b*Math.round(g.length/b);e.css("width",k+"px"),h.unbind().bind("click",function(){if(!e.is(":animated")){(parseInt(e[0].clientWidth/f[0].clientWidth)-1)*f[0].clientWidth;return e.offset().left<f.offset().left&&e.animate({left:e.offset().left-f.offset().left+f[0].clientWidth+parseInt(j)},800,function(){i.removeClass("enabled"),f.offset().left<=f.offset().left&&h.addClass("enabled")}),!1}}),i.unbind().bind("click",function(){if(!e.is(":animated")){var a=(parseInt(e[0].clientWidth/f[0].clientWidth)-1)*f[0].clientWidth;return e.offset().left>-(a-f.offset().left)&&e.animate({left:e.offset().left-f.offset().left-f[0].clientWidth-parseInt(j)},800,function(){h.removeClass("enabled"),e.offset().left<=-(a-f.offset().left)&&i.addClass("enabled")}),!1}})},jionActDialog:function(){var a=this;$(a).unbind().bind("click",function(){return styledialog.initDialogHTML({title:"申请活动",url:commonParams.dodoYanxiuPath+"/frontend/index/applyActivity",width:642,confirm:{show:!0,name:"确认"},cancel:{show:!0,name:"取消"}}),styledialog.initContent("申请活动","",function(){$("#PopupsFunc").find("input[name='confirm']").unbind().bind("click",function(){var a=new btnLoading(this);a.toLoading();var b=$("form#apply_form").serialize();AjaxForJson($("form#apply_form").attr("action"),b,function(a){"success"==a.type&&(styledialog.closeDialog(),styledialog.initDialogHTML({title:"提交成功",content:'<div class="imgDesc"><img src="'+commonParams.dodoStaticPath+'/yanxiuPage/img/creatStudyActiveDone.gif" alt="" /></div><div class="txtDesc"><h3>您的活动申请已成功提交专家审核。</h3><p>如审核通过，平台服务人员会与您取得联系，指导您进行相关资料的上传。感谢您的关注和参与！</p></div>',width:642,confirm:{show:!0,name:"我知道了~"},cancel:{show:!1,name:"取消"}}),styledialog.initContent("提交成功","",null),$("#PopupsFunc").find("input[name='confirm']").unbind().bind("click",function(){styledialog.closeDialog()}))})})}),!1})}});var rateStarParams={zsIndex:null,tyIndex:null};jQuery.fn.extend({toRemark:function(){var a=this;return function(){$(a).unbind().bind("click",function(){return""==$(a).attr("data-uid")?loginDialog():(styledialog.initDialogHTML({title:"评分",content:'<div class="inner"><ul class="f-mb10"><input type="hidden" name="hdn_ty" value="0"><input type="hidden" name="hdn_zs" value="0"><li><strong class="font14">你来评分：</strong><span class="orangeTxt">点击星星就能打分！</span></li><li class="rateControl" id="li_zs">·<span>专题评分</span><span name="i_stars"><i class="icon_tc2"></i><i class="icon_tc2"></i><i class="icon_tc2"></i><i class="icon_tc2"></i><i class="icon_tc2"></i></span><span class="orangeTxt"></span></li></ul><span class="grayTxt f-fl mT5">评价可获得1金币，前五名双倍！</span><div class="f-cb "></div></div>',width:330,confirm:{show:!0,name:"确认"},cancel:{show:!0,name:"取消"}}),styledialog.initContent("评分","",function(){$("li#li_zs").rateControl(new Array("","","","","",""),"zsIndex"),$("#PopupsFunc input[name='confirm']").unbind().bind("click",function(){var b=rateStarParams.zsIndex?rateStarParams.zsIndex+1:0;rateStarParams.tyIndex?rateStarParams.tyIndex+1:0;return AjaxForJson(commonParams.dodoYanxiuPath+$(a).parent().find("input[name='special_eva_url']").val(),"user_id="+$(a).attr("data_uid")+"&special_id="+$(a).parent().find("input[name='special_id']").val()+"&evaluate_score="+b,function(a){"success"==a.type?(styledialog.closeDialog(),promptMessageDialog({icon:"finish",content:a.msg,time:1e3}),setTimeout(function(){window.location.reload()},1e3)):(styledialog.closeDialog(),promptMessageDialog({icon:"warning",content:a.msg,time:1e3}))}),!1})})),!1})}()},rateControl:function(a,b){var c=null,d=this;return this.length<=0?!1:void $(d).each(function(){var e=$(d).find("i"),f=$(d).find("span.orangeTxt"),g=a;e.css("cursor","pointer"),e.bind({mouseover:function(){for(var a=e.index($(this)),b=0;a+1>b;b++)e[b].className="icon_tc3";f.html(g[a])},mouseout:function(){e.attr("class","icon_tc2"),f.html(g[5])},click:function(){switch(b){case"zsIndex":rateStarParams.zsIndex=e.index($(this));break;case"tyIndex":rateStarParams.tyIndex=e.index($(this))}return c=e.index($(this)),$("div.ratePopUps").find("a[name='a_confirm']").attr("class","btnStyle1"),!1}}),$(this).find("span[name='i_stars']").bind("mouseleave",function(){if(null!=c){for(var a=0;c+1>a;a++)e[a].className="icon_tc3";f.html(g[c])}})})}}),jQuery.fn.extend({clearText:function(){return this.each(function(a){var b=$(this).data("default")?$(this).data("default"):$(this).attr("datavalue");this.defaultValue==b&&(this.style.color="#b5b5b5",$(this).addClass("clearStyle")),$(this).bind({blur:function(a){this.value=jQuery.trim(this.value),this.value.length<=0&&jQuery.trim(this.defaultValue)==b?(this.value=this.defaultValue,this.style.color="#b5b5b5",$(this).addClass("clearStyle")):$(this).removeClass("clearStyle")},focus:function(a){jQuery.trim(this.value)==b&&(this.value="",this.style.color="#383838"),$(this).removeClass("clearStyle")}})})},changeStyle:function(){return this.each(function(a){$(this).bind({blur:function(a){$(this).removeClass("inputBoxFocusStyle")},focus:function(a){$(this).addClass("inputBoxFocusStyle")}})})},checkMaxLen:function(){return this.each(function(a){var b=$(this).attr("maxLength");$(this).val().length>b&&$(this).val($(this).val().substring(0,b))})}});